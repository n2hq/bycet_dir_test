import{j as e}from"./jsx-runtime-0DLF9kdB.js";import{H as z}from"./HeaderLogo-Bt70dA6Q.js";import{g as Q,bf as D,z as H,bg as O,bh as K,bi as V,bj as G,bk as I,L as T,b5 as J,K as W,f as F,ba as P,a3 as R,b8 as X,b9 as Y,a6 as Z,aa as ee,bl as se,a8 as te,bm as ae}from"./lib-C4HmGJL5.js";import{r as l,c as y,F as re,L as N,d as $,u as ne,a as le,b as ce}from"./components-CqyJs_9b.js";import{I as oe}from"./index-kGvPjvJT.js";import{L as ie}from"./LeftNav-CS4dIf-4.js";import{u as S,A as de}from"./AuthContext-CWrmJizj.js";const _=l.createContext(null),ue=()=>{const r=l.useContext(_);return r||null},xe=({children:r})=>{const[t,n]=l.useState(!1),[c,o]=l.useState(!1),i={isOpen:c,showMenu:()=>o(!0),closeMenu:()=>o(!1)};return e.jsx(_.Provider,{value:i,children:r})},he=[{title:"Home",url:"/",icon:e.jsx(D,{})},{title:"Search",url:`${Q.searchBaseUrl}`,icon:e.jsx(H,{})},{title:"Contact",url:"/web/contact",icon:e.jsx(O,{})},{title:"Terms of Use",url:"/web/terms",icon:e.jsx(K,{})},{title:"Privacy",url:"/web/privacy",icon:e.jsx(V,{})},{title:"Responsible Disclosure",url:"/web/responsible-disclosure",icon:e.jsx(G,{})},{title:"Copyright",url:"/web/copyright",icon:e.jsx(I,{})}],pe=({openMenu:r,closeNav:t})=>{y();const n=r?"translate-x-0":"translate-x-[-100%]",c=r?"block":"hidden",[o,x]=l.useState(null),a=S();if(!a)return null;const{user:i}=a;return l.useEffect(()=>{const d=async f=>{const p=await T(f||"");x(p)};a!=null&&a.user&&d(a==null?void 0:a.user.guid)},[a==null?void 0:a.user]),e.jsxs("div",{className:"",children:[e.jsx("div",{onClick:t,className:`transform fixed transition-all duration-500 inset-0 z-4000 bg-black opacity-20 w-full ${c}`}),e.jsx("div",{className:`transform transition-all duration-500 delay-0 fixed justify-start h-full w-full md:w-[320px] bg-white z-[4001] overflow-y-auto top-0 left-0 text-black ${n} ${r?"shadow-lg shadow-black/50":""} bg-[url(https://unbound.radiantthemes.com/wp-content/uploads/2022/03/Banner-Image.png?id=8229)]`,children:e.jsxs("div",{className:"bg-transparent ",children:[e.jsxs("div",{className:" px-4 md:pl-12 flex place-content-between h-[60px] place-items-center",children:[e.jsx("div",{className:"h-full flex justify-center items-center",children:e.jsx(z,{})}),e.jsx("div",{className:"h-full flex justify-center items-center cursor-pointer",children:e.jsx("div",{onClick:t,className:"w-[30px] h-[30px] bg-gray-200 rounded-full flex justify-center items-center hover:bg-blue-600 hover:text-white border border-gray-500 group",children:e.jsx(oe,{size:28,className:" transition-all duration-500 ease-in-out group-hover:rotate-90"})})})]}),e.jsx("hr",{className:"mobile-nav-hrule"}),e.jsx(ge,{menuData:he,closeNav:t}),e.jsxs("div",{children:[e.jsx("hr",{className:"mt-[20px]"}),e.jsx("div",{className:"mt-[20px]"}),i&&e.jsx(ie,{userProfile:o})]}),e.jsx("div",{className:"h-10"})]})})]})},ge=({menuData:r,closeNav:t})=>{const n=y();return e.jsx("div",{children:r.map((c,o)=>(c.icon,e.jsx("div",{children:e.jsx(re,{to:c.url,onClick:()=>t(),children:e.jsxs("div",{className:`group text-[15px] py-2 px-4 rounded-none hover:bg-gray-200 hover:cursor-pointer flex place-items-center place-content-between w-full hover:text-gray-500 ${n.pathname===c.url&&" bg-gray-200 text-black"}`,children:[e.jsxs("div",{className:" flex place-items-center gap-10 py-1",children:[e.jsx("div",{className:"w-[22px] h-[20px] flex place-items-center place-content-center  text-[20px]",children:c.icon}),e.jsx("div",{className:"text-[13px]",children:c.title})]}),e.jsx("div",{children:e.jsx(J,{size:20,className:"transition-all delay-0 duration-500 ease-in-out group-hover:rotate-90"})})]})})},o)))})},fe=()=>{const r=ue();return e.jsxs("div",{className:"text-2xl",children:[e.jsx("div",{className:"z-[10000]",children:e.jsx(pe,{openMenu:r==null?void 0:r.isOpen,closeNav:r==null?void 0:r.closeMenu})}),e.jsx("div",{className:"cursor-pointer",onClick:()=>r==null?void 0:r.showMenu(),children:e.jsx(W,{})})]})},me=()=>{const r=S();if(!r)return null;const{user:t}=r,[n,c]=l.useState(""),[o,x]=l.useState(null);return l.useEffect(()=>{c((t==null?void 0:t.first_name)+" "+(t==null?void 0:t.last_name))},[t]),l.useEffect(()=>{const a=async i=>{const d=await R(i);x(d)};(t==null?void 0:t.guid)!==null&&a(t==null?void 0:t.guid)},[t]),e.jsx(N,{to:"/web/account/profile",children:e.jsxs("div",{className:`flex hover:bg-gray-100 px-[10px] py-[5px] 
        hover:cursor-pointer gap-2 place-items-center`,children:[e.jsx("div",{className:` relative h-[30px] w-[30px] rounded-full
                    overflow-hidden flex place-content-center place-items-center
                    bg-white`,children:o!=null&&o.image_url?e.jsx("img",{className:"object-cover w-full h-full",src:F.IMG_BASE_URL+(o==null?void 0:o.image_url),alt:""}):e.jsx(P,{className:"object-cover w-[70%] h-[70%]"})}),e.jsx("div",{className:`truncate text-[13px] inline-block
                    text-gray-500`,children:n})]})})},be=()=>e.jsx(N,{to:"/web/account/profile",children:e.jsxs("div",{className:`flex hover:bg-gray-100 px-[10px] py-[5px] 
        hover:cursor-pointer gap-2 place-items-center`,children:[e.jsx("div",{className:`bg-gray-200 h-[30px] w-[30px] rounded-full
                flex place-items-center place-content-center border`,children:e.jsx(X,{className:"text-[20px]"})}),e.jsx("div",{className:"truncate text-[13px] text-gray-500",children:"Account & Settings"})]})}),ve=()=>{const r=S();if(!r)return null;const{signoutReload:t}=r;return e.jsxs("div",{onClick:()=>t(),className:`flex hover:bg-gray-100 px-[10px] py-[5px] 
        hover:cursor-pointer gap-2 place-items-center`,children:[e.jsx("div",{className:`bg-gray-200 h-[30px] w-[30px] rounded-full
                flex place-items-center place-content-center border`,children:e.jsx(Y,{className:"text-[20px]"})}),e.jsx("div",{className:"truncate text-[13px] text-gray-500",children:"Signout"})]})},je=({open:r})=>e.jsx("div",{children:r&&e.jsx("div",{className:"absolute z-[1000]",children:e.jsx("div",{className:"relative",children:e.jsx("div",{className:"absolute right-[-25px] top-[5px]",children:e.jsxs("div",{className:`w-[250px] bg-white rounded-xl p-[5px] 
                            shadow-lg
                                shadow-black/30`,children:[e.jsx(me,{}),e.jsx("div",{className:"px-[10px] my-1",children:e.jsx("hr",{})}),e.jsxs("div",{children:[e.jsx(be,{}),e.jsx(ve,{})]})]})})})})}),we=({userProfileImgData:r})=>{const t=S();if(!t)return null;const{user:n}=t,[c,o]=l.useState("");return l.useEffect(()=>{o((n==null?void 0:n.first_name)+" "+(n==null?void 0:n.last_name))},[n]),e.jsx("div",{className:` relative h-full w-full rounded-full
                    overflow-hidden flex place-content-center place-items-center
                    bg-gray-400 z-0`,children:r!=null&&r.image_url?e.jsx("img",{className:"object-cover w-full h-full z-0",src:F.IMG_BASE_URL+(r==null?void 0:r.image_url),alt:""}):e.jsx(P,{className:"object-cover w-[70%] h-[70%] z-0"})})},ye=()=>{const[r,t]=l.useState(!1),n=S(),c=n==null?void 0:n.user,o=()=>t(!0),x=async()=>{await new Promise(d=>setTimeout(d,300)),t(!1)},[a,i]=l.useState(null);return l.useEffect(()=>{const d=async f=>{const p=await R(f);i(p)};(c==null?void 0:c.guid)!==null&&(c==null?void 0:c.guid)!==void 0&&d(c==null?void 0:c.guid)},[c]),e.jsxs("div",{children:[c?e.jsx("button",{onClick:d=>o(),onBlur:d=>x(),className:"w-[40px] h-[40px] bg-gray-400 hover:bg-gray-300 rounded-full text-white flex place-items-center place-content-center text-[13px] relative cursor-pointer",children:a!==null?e.jsx(we,{userProfileImgData:a}):e.jsx(P,{className:"object-cover w-[80%] h-[80%]"})}):e.jsx(N,{to:"/web/signin",children:e.jsx("button",{className:"text-lg border rounded-full w-[80px] py-[4px] hover:border border-[#A52A2A] hover:bg-black hover:text-white",children:"Sign in"})}),e.jsx(je,{open:r})]})},Ne=[{title:"Hotels",url:"/web/category/hotels"},{title:"Real Estate",url:"/web/category/real-estate"},{title:"Restaurants",url:"/web/category/restaurants"}],Se=()=>{const r=y();return e.jsxs("div",{className:"lg:flex gap-3 hidden px-4 place-items-center",children:[e.jsx(Ce,{}),Ne.map((t,n)=>e.jsx("div",{className:"hover:text-[#6001D2] underline ",children:e.jsx(N,{to:t.url,children:e.jsx("div",{className:`flex place-items-center group hover:underline px-5 py-2  rounded-full hover:bg-[#D2B48C]/20 hover:text-black ${r.pathname===t.url?"bg-[#D2B48C]/20 text-black":""}`,children:e.jsx("div",{className:"text-[14px]",children:t.title})})})},n))]})},Ce=()=>e.jsx("div",{className:"",children:e.jsx(N,{to:"/web/search",children:e.jsx("div",{className:"flex place-items-center group underline",children:e.jsx("div",{className:`text-[14px] font-normal py-2 px-4  hover:bg-[#D2B48C]/20 rounded-full text-black hover:text-gray-700 ${location.pathname.includes("/web/search")?"bg-[#D2B48C]/20 text-black":""}`,children:"Search"})})})}),ke=({queryInput:r,onQueryChange:t,loading:n=!1,initialFilters:c={q:"",category:"",country:"",state:"",city:""}})=>{const o=$(),x=y(),[a,i]=l.useState(c),[d,f]=l.useState([]),[p,C]=l.useState([]),[v,k]=l.useState([]),[M,B]=l.useState([]);l.useEffect(()=>{const s=new URLSearchParams(x.search);i({q:s.get("q")||"",category:s.get("category")||"",country:s.get("country")||"",state:s.get("state")||"",city:s.get("city")||""})},[x.search]),l.useEffect(()=>{L(),q()},[]),l.useEffect(()=>{a.country?U(a.country):k([])},[a.country]),l.useEffect(()=>{a.country&&a.state?m(a.country,a.state):B([])},[a.country,a.state]);const L=async()=>{const s=Z.sort((u,h)=>u.name.localeCompare(h.name));f(s)},q=async()=>{try{const s=await ee();C(s||[])}catch(s){console.error("Failed to fetch countries:",s)}},U=async s=>{try{const u=await se(s);k(u||[])}catch(u){console.error("Failed to fetch countries:",u)}},m=async(s,u)=>{try{const h=await te(s,u);B(h||[])}catch(h){console.error("Failed to fetch countries:",h)}},b=(s,u)=>{s==="q"?(i(h=>({...h,q:u})),t&&t(u)):i(h=>({...h,[s]:u}))},j=s=>{b("country",s),U(s)},E=s=>{b("state",s),m(a.country,s)},w=()=>{const s=new URLSearchParams;a.q&&s.set("q",a.q),a.category&&s.set("category",a.category),a.country&&s.set("country",a.country),a.state&&s.set("state",a.state),a.city&&s.set("city",a.city),s.set("page","1"),o(`/web/search?${s.toString()}`)},A=s=>{s.key==="Enter"&&w()},g=()=>{o(x.pathname)};return l.useEffect(()=>{r!==void 0&&r!==a.q&&i(s=>({...s,q:r}))},[r]),e.jsxs("div",{className:"w-full space-y-3 p-4 bg-gray-50 rounded-lg border",children:[e.jsxs("div",{className:"w-full grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsx("div",{className:"w-full",children:e.jsx("input",{id:"query",type:"text",value:a.q,onChange:s=>b("q",s.target.value),onKeyPress:A,placeholder:"Hotel, Restaurant or ABC Inc.",className:"w-full px-3 border border-gray-300 rounded outline-none h-[35px] focus:border-blue-500 focus:ring-1 focus:ring-blue-500",disabled:n})}),e.jsx("div",{className:"w-full",children:e.jsxs("select",{id:"category",value:a.category,onChange:s=>b("category",s.target.value),className:"w-full h-[35px] border border-gray-300 rounded px-2 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500",disabled:n,children:[e.jsx("option",{value:"",children:"All Categories"}),d.map((s,u)=>e.jsx("option",{value:s==null?void 0:s.id,children:s==null?void 0:s.name},s==null?void 0:s.id))]})})]}),e.jsxs("div",{className:"w-full grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsx("div",{className:"w-full",children:e.jsxs("select",{id:"country",value:a.country,onChange:s=>j(s.target.value),className:"w-full h-[35px] border border-gray-300 rounded px-2 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500",disabled:n,children:[e.jsx("option",{value:"",children:"All Countries"}),p.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]})}),e.jsx("div",{className:"w-full",children:e.jsxs("select",{id:"state",value:a.state,onChange:s=>E(s.target.value),className:"w-full h-[35px] border border-gray-300 rounded px-2 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500",disabled:n||!a.country,children:[e.jsx("option",{value:"",children:"All States"}),v.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]})})]}),e.jsxs("div",{className:"w-full grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsx("div",{className:"w-full",children:e.jsxs("select",{id:"city",value:a.city,onChange:s=>b("city",s.target.value),className:"w-full h-[35px] border border-gray-300 rounded px-2 outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500",disabled:n||!a.state,children:[e.jsx("option",{value:"",children:"All Cities"}),M==null?void 0:M.map(s=>e.jsx("option",{value:s.name,children:s.name},s.id))]})}),e.jsxs("div",{className:"w-full flex gap-2",children:[e.jsx("button",{onClick:w,disabled:n,className:"flex-1 bg-blue-600 text-white h-[35px] px-4 rounded hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",children:n?"Searching...":"Search"}),e.jsx("button",{onClick:g,disabled:n,className:"px-4 h-[35px] border border-gray-300 rounded text-gray-700 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",children:"Clear"})]})]}),n&&e.jsx("div",{className:"text-center text-blue-600 text-sm",children:"Loading results..."})]})},Me=()=>{var w,A;const r=$(),t=ne(),[n]=le(),[c,o]=l.useState([]),[x,a]=l.useState({q:""}),d=ce().state==="loading";(w=t==null?void 0:t.data)!=null&&w.items,(A=t==null?void 0:t.data)==null||A.pagination,t==null||t.query,t==null||t.countries;const[f,p]=l.useState(!1),[C,v]=l.useState(""),k={q:n.get("q")||"",category:n.get("category")||"",country:n.get("country")||"",state:n.get("state")||"",city:n.get("city")||""},[M,B]=l.useState(""),L=g=>{v(g),j(g)},q=y(),m=new URLSearchParams(q.search).get("q")||"",[b,j]=l.useState(""),E=g=>{const s=g.target.value;v(s),j(s)};return l.useEffect(()=>{m!==""&&(v(m),j(m))},[m]),e.jsxs("div",{className:"w-full flex flex-col group z-10",children:[e.jsxs("div",{className:"bg-blue-50 w-full h-[34px] rounded-full flex place-items-center pl-4  group-hover:bg-white hover:shadow-lg z-0",onClick:()=>p(!0),children:[e.jsx("input",{type:"text",name:"q",value:b,placeholder:"Search directory...",className:"bg-transparent w-full outline-none text-lg",onChange:E,onKeyUp:g=>{if(g.key==="Enter"){const s=new URLSearchParams(q.search);s.set("q",C),s.set("page","1"),r(`/web/search?${s.toString()}`)}}}),e.jsx("button",{className:"bg-[#000] h-full w-[60px] rounded-full flex place-items-center place-content-center text-white",children:e.jsx(ae,{})})]}),e.jsx("div",{className:`w-full h-auto absolute z-30 top-[60px] left-0 bg-white shadow-lg shadow-black/20  ${f?"block":"hidden"}`,onMouseLeave:()=>p(!1),children:e.jsx("div",{className:"md:w-[85%] mx-auto w-full pb-5",children:e.jsx(ke,{queryInput:C,onQueryChange:L,loading:d,initialFilters:k})})})]})},ze=()=>e.jsx(xe,{children:e.jsx(de,{children:e.jsxs("div",{children:[e.jsx("div",{className:"h-[60px] fixed z-10 w-full left-0 top-0 right-0 shadow-lg shadow-black/5 bg-white",children:e.jsxs("div",{className:"flex place-content-between place-items-center h-full max-w-[96%] mx-auto w-full gap-6",children:[e.jsxs("div",{className:"flex place-items-center place-content-start gap-4  grow h-full",children:[e.jsx(fe,{}),e.jsx(z,{}),e.jsx(Me,{})]}),e.jsxs("div",{className:"flex place-items-center gap-6",children:[e.jsx(Se,{}),e.jsx(ye,{})]})]})}),e.jsx("div",{className:"h-[60px] z-0"})]})})});export{ze as M};
