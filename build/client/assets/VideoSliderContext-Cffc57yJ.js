import{j as e}from"./jsx-runtime-0DLF9kdB.js";import{r}from"./components-CqyJs_9b.js";import{x as f,B as E,a as B,v as z,w as D}from"./lib-C4HmGJL5.js";import{I as M}from"./index-kGvPjvJT.js";const j=r.createContext(null);function O(){return r.useContext(j)}const P=({children:g})=>{const[h,v]=r.useState(!1),[d,y]=r.useState(null),[t,N]=r.useState([]),[o,x]=r.useState(0),[w,k]=r.useState(null);r.useRef(0),r.useRef(0);const[u,C]=r.useState(!0),b=()=>{v(!1)},I=()=>{let s=o;const i=t[s],c=document.getElementById(i==null?void 0:i.video_guid);o!==0&&(c.src="");let m=o===0?t.length-1:o-1;const n=t[m];let a;try{const l=t[s];a=document.getElementById(l==null?void 0:l.video_guid),a.src=""}finally{a=document.getElementById(n==null?void 0:n.video_guid)}const p=f(n==null?void 0:n.video_url);a.src=`https://www.youtube.com/embed/${p}`,x(l=>l===0?t.length-1:l-1)},S=()=>{let s=o;const i=t[s],c=document.getElementById(i==null?void 0:i.video_guid);o!==t.length-1&&(c.src="");let m=o===t.length-1?0:o+1;const n=t[m];let a;try{const l=t[s];a=document.getElementById(l==null?void 0:l.video_guid),a.src=""}finally{a=document.getElementById(n==null?void 0:n.video_guid)}const p=f(n==null?void 0:n.video_url);a.src=`https://www.youtube.com/embed/${p}`,x(l=>l===t.length-1?0:l+1)};r.useEffect(()=>{d!==null&&x(d-1)},[d]);let _={dialog:h,setDialog:v,selectedSlide:d,setSelectedSlide:y,slides:t,setGallery:N,setListing:k};return r.useEffect(()=>{const s=i=>{i.key==="Escape"&&b()};return h&&document.addEventListener("keydown",s),()=>{document.removeEventListener("keydown",s)}},[h]),e.jsxs(j.Provider,{value:_,children:[h&&e.jsx("div",{className:`flex w-full h-full bg-white z-[20001] 
                fixed top-0 left-0 right-0 bottom-0 `,children:e.jsxs("div",{className:"grid grid-cols-12 gap-0 w-full",children:[e.jsxs("div",{className:`${u?"col-span-12":"col-span-12 md:col-span-9"}  w-full h-full relative bg-black flex`,children:[e.jsx("div",{className:" w-full h-screen flex overflow-hidden",children:t&&d&&t.map((s,i)=>{const c=f(s==null?void 0:s.video_url),m=`https://www.youtube.com/embed/${c}`;return Date.now().toString()+c,e.jsxs("div",{style:{display:i===o?"block":"none"},className:`object-scale-down w-full h-full 
                   flex flex-shrink-0 flex-grow-0 transition-transform 
                   ease-in-out duration-1000 relative place-items-center place-content-center bg-black text-white`,children:[e.jsxs("div",{className:"absolute top-[15px] my-4 ",children:[o+1," / ",t.length]}),e.jsx("div",{className:"absolute top-[50%] text-center w-full",children:"Loading..."}),e.jsx("div",{className:"w-[100%] md:w-[70%] h-[70%] relative",children:e.jsx("iframe",{id:s==null?void 0:s.video_guid,src:m,className:"absolute top-0 left-0 w-full h-full",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"})}),e.jsx("div",{className:"absolute bottom-[15px] w-full z-[20px] px-5 py-7 bg-black/80",id:"vstitle",children:e.jsx("div",{className:" text-center text-white text-[14px] font-extralight ",children:s==null?void 0:s.video_title})})]},i)})}),e.jsx("button",{onMouseDown:()=>{I()},className:`block absolute top-0 bottom-0 
                                                p-[1rem] cursor-pointer left-0 group h-full 
                                                transition duration-1000 ease-in-out`,children:e.jsx("div",{className:`w-[50px] h-[50px] bg-white/60 rounded-full flex place-content-center place-items-center group-hover:bg-white/30
                                                        transition duration-500 ease-in-out`,children:e.jsx(E,{className:" stroke-white fill-black w-[2rem] h-[2rem]"})})}),e.jsx("button",{onMouseDown:S,className:`block absolute top-0 bottom-0 
                                                    p-[1rem] cursor-pointer ${u?"right-0":"right-5 md:right-0"}  group 
                                                     transition duration-1000 ease-in-out`,children:e.jsx("div",{className:`w-[50px] h-[50px] bg-white/60 rounded-full flex place-content-center place-items-center group-hover:bg-white/30
                                                        transition duration-500 ease-in-out`,children:e.jsx(B,{className:" stroke-white fill-black w-[2rem] h-[2rem]"})})}),e.jsx("div",{onMouseDown:()=>b(),className:`w-[30px] h-[30px] z-[300] bg-white
                                                    flex place-content-center place-items-center
                                                    rounded-full absolute left-2 top-2 cursor-pointer
                                                    hover:bg-white/40 transition duration-1000 ease-in-out`,children:e.jsx(M,{className:"text-[30px]"})}),e.jsx("div",{onClick:()=>{C(!u)},className:"w-[30px] h-[30px] z-[300] bg-white flex place-content-center place-items-center rounded-full absolute top-2 right-2 cursor-pointer hover:bg-white/40 transition duration-1000 ease-in-out",children:u?e.jsx(z,{className:"text-[20px]"}):e.jsx(D,{className:"text-[20px]"})})]}),e.jsxs("div",{className:`${u?"hidden":"hidden md:block md:col-span-3"}   px-5 overflow-x-hidden overflow-y-auto h-full bg-white`,children:[e.jsxs("h1",{className:" text-[22px] my-4 font-sans font-extrabold tracking-tight leading-[24px]",children:["Videos for ",w&&w.title]}),e.jsxs("div",{className:" my-4 ",children:[o+1," / ",t.length]}),e.jsx("hr",{}),e.jsx("div",{className:"my-4 whitespace-pre-line border-b pb-2",children:t[o].video_title}),t[o].video_description&&e.jsxs("div",{className:"my-4 whitespace-pre-line  pt-0 pb-8 ",children:[e.jsx("div",{className:"font-bold text-lg mb-3",children:"Description"}),e.jsx("div",{children:t[o].video_description})]})]})]})}),g]})};export{P as V,O as u};
